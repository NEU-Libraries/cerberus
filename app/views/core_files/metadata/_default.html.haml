- if new_object
  - if @core_file.canonical_class == "VideoFile"
    %fieldset.row-fluid
      = render partial: 'core_files/metadata/video', locals: {:f => f}
  - if @core_file.canonical_class == "AudioFile"
    %fieldset.row-fluid
      = render partial: 'core_files/metadata/audio', locals: {:f => f}
  - if @core_file.canonical_class == "ImageMasterFile"
    %fieldset.row-fluid
      = render partial: 'core_files/metadata/image', locals: {:f => f}
  - if @core_file.category.first == "Learning Objects"
    %fieldset.row-fluid
      = render partial: 'core_files/metadata/learning_object', locals: {:f => f}
- if params[:action] == "edit"
  %fieldset.row-fluid
    = render partial: 'core_files/metadata/replacement_thumbnail', locals: {:f => f}
  - if @core_file.canonical_class == "VideoFile" || @core_file.canonical_class == "AudioFile"
    %legend Captions
    = render partial: "core_files/metadata/caption", locals: {:f => f}
.row-fluid
  .span12
    %legend Basic Information
%fieldset.row-fluid
  .span6
    = f.hidden_field(:non_sort, :value => "#{@core_file.non_sort}")
    = f.hidden_field(:title, :value => "#{@core_file.title}", name: 'core_file[title][]')
    = f.label :title, "Title", class: "required-label"
    = text_field_tag :full_title, "#{@core_file.non_sort} #{@core_file.title}".strip, required: true, pattern: ".*\\S.*", class: "input-block-level", placeholder: "US Congressman poses with a supporter"
  .span6
    = render partial: 'core_files/metadata/data_form_date', locals: {:f => f}
%fieldset.row-fluid
  .span6
    = render partial: 'core_files/metadata/data_form_creator_personal_names', locals: {:f => f, :names => @core_file.personal_creators }
    %button#add_another_personal_creator.btn.btn-block.btn-success{:type => "button"}
      %i.icon-plus-sign.icon-large
      Add Personal Creator
  .span6
    = render partial: 'core_files/metadata/data_form_corporate_creators', locals: {:f => f, :corporate_names => @core_file.corporate_creators }
    %button#add_another_corporate_creator.btn.btn-success.btn-block{:type => "button"}
      %i.icon-plus-sign.icon-large
      Add Corporate Creator

.row-fluid

  %fieldset.span6
    %legend Description
    = f.label :description, "Description"
    = f.text_area :description, pattern: ".*\\S.*", name: 'core_file[description][]', class: "input-block-level", rows: 5
  %fieldset.span6
    %legend Keyword(s)
    = render partial: 'shared/sets/data_form_keywords', locals: {:f => f, :array_type => "core_file", :keywords => @core_file.keywords }
    %button#add_another_keyword.btn.btn.btn-block.btn-success{:type => "button"}
      %i.icon-plus-sign.icon-large
      Add Keyword
.row-fluid
  %fieldset.span6
    %legend Mass Permissions
    = label_tag 'core_file[mass_permissions]', "Choose Mass Permissions:"
    - if params[:action] == "edit"
      = select_tag 'core_file[mass_permissions]', options_for_select(@core_file.valid_mass_permissions, @core_file.mass_permissions) , class: "span6"
    - else
      = select_tag 'core_file[mass_permissions]', options_for_select(@core_file.valid_mass_permissions, 'public') , class: "span6"
    %p.help-block
      %ul
        %li Setting to 'public' will allow anyone accessing the site to see your item.
        %li Setting to 'private' will only allow groups that are explicitly chosen to see your item.
    %legend Embargo Release Date
    = render partial: 'core_files/metadata/data_form_embargo_date', locals: {:f => f}

  %fieldset.span6
    %legend Permissions
    = render partial: 'shared/sets/data_form_permissions_element', locals: {:f => f, :array_type => "core_file", :permissions => filtered_permissions(@core_file) }
    %button#add_another_permission.btn.btn-success.btn-block{:type => "button"}
      %i.icon-plus-sign.icon-large
      Add Permission
