<%= form_for @sentinel, url: {action: "create"} do |f| %>
  <% if params[:parent].present? %>
  <%= f.hidden_field :set_pid, :value => params[:parent] %>
  <% end %>


  <div>
    <%= render partial: 'core_file', locals: {:f => f} %>
  <hr>

  <h3>
    Content Objects
  </h3>

  <div>
    <% @content_list.each_with_index do |a, i| %>
      <% if i.even? %>
        </div>
        <div class="row-fluid">
      <% end %>
      <% if !@sentinel.send("#{a[1]}".to_sym).blank? %>
        <% permissions = @sentinel.send("#{a[1]}".to_sym)["permissions"]["identity"].zip(@sentinel.send("#{a[1]}".to_sym)["permissions"]["permission_type"]) %>
      <% end %>
      <%= render partial: 'model', locals: {:f => f, :i => i, :a => a, :permissions => permissions ? permissions : []} %>
      <% if i == @content_list.length - 1 %>
        </div>
      <% end %>
      <% next %>
    <% end %>

    <div class="form-actions">
      <%= f.submit class: ['btn', 'btn-primary'], value: 'Submit', data: { disable_with: "Please wait..."} %>
      <a class="btn btn-warning" href="#cancelEditModal" data-toggle="modal" >
        Cancel
      </a>
    </div>

  <% end %>

<%= render partial: 'shared/cancel_edit_modal', locals: { item: @set } %>
