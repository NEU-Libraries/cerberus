- facet_list ||= facet_field_names

%ul.breadcrumb
  - breadcrumb_to_root(@set).each do |breadcrumb|
    =breadcrumb
  = render partial: 'shared/sets/breadcrumb_action_menu'
-# Had to break off the partial into two files to make sure the popover div renders outside of the list.
= render partial: 'shared/sets/breadcrumb_action_menu_links'


%article.well.clearfix.inline-headings
  %h1{:class => @set.klass, :id => "#{@set.pid}-title",}
    = kramdown_parse(@set.title)
  %h3
    - if @set.klass == "Collection" # and doesn't have a thumbnail to render
      = render partial: 'shared/icon', locals: { class_string: 'icon-folder-open' }
    - elsif @set.klass == "Community"
      = render partial: 'shared/icon', locals: { class_string: 'icon-group' }
    = render partial: 'catalog/search_form', locals: { scope: @set.pid }
  %h1
    %small
      = @set.type_label
  - if !@set.thumbnail_list.empty?
    %img{src: @set.thumbnail_list.first, title: @set.title, alt: "", class: ['pull-left', 'well-padded-thumb']}(aria-labeledby="#{@set.pid}-title" role="presentation")
  - if !@set.description.blank?
    %p.set-description
      = kramdown_parse(@set.description)

  - if current_user
    -if @set.klass == "Collection" && (current_user.can? :edit, @set.pid) && (@set.smart_collection_type.nil? || @set.smart_collection_type == "miscellany")
      %nav.set-actions
        %ul.nav.nav-pills
          %li
            %a{:href =>  edit_collection_path(@set)}
              Edit
      =render partial: 'shared/sets/delete_item_modal', locals: { item: @set }

- if render_constraints(params) != ""
  %h1.page-header
    %i.icon-search
    %small
      = render_constraints(params)

- drs_items_class = drs_view_class == "list" ? "span9" : "span12"
- sidebar_class = drs_view_class == "list" ? "span3" : "span12"
- pane_small_class = drs_view_class == "list" ? "" : "span3"
- pane_large_class = drs_view_class == "list" ? "" : "span6"
%main.row( role="main" )
  %aside.drs-sidebar{ class: sidebar_class }
    .pane.results-view{ class: pane_small_class }
      %h4.sr-only View layout preferences
      = render partial: 'shared/sets/sets_sidebar'
    .pane.facets{ class: pane_small_class }
      = render :partial=>'catalog/facets', locals: { facet_list: facet_list }
    .pane.pagination-info{ class: pane_large_class }
      = render 'catalog/sort_and_per_page'

  %section{ class: drs_items_class }
    -# Main content
    = render :partial => 'catalog/did_you_mean'
    -# Render the results in the main section of the page.
    = render 'catalog/results_pagination'
    = render :partial => 'catalog/document_list'
    = render 'catalog/results_pagination'

%div#add_compilation_form{ style: 'display:none' }
