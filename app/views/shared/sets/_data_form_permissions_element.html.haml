- if !permissions.empty?
  - permissions.each_with_index do |perm, index|
    .permission.to-remove
      = text_field_tag "pretty_name", I18n.t("groups.#{perm[:name]}.name", :default => perm[:name]), class: "span12", readonly: true
      = f.hidden_field :identity, value: perm[:name], name: "#{array_type}[permissions][identity][]", pattern: ".*\\S.*", class: "span12", readonly: true
      = label_tag "#{array_type}[permissions][identity_type][]", "Should this identity be allowed to read or edit?"
      %div.input-append{:style => "display: block;"}
        = select_tag "#{array_type}[permissions][permission_type][]", options_for_select(['read', 'edit'], perm[:access]), class: "span11 selectpicker"
        %button.btn.btn-danger{"data-delete" => "", "data-remove" => "true", "data-target" => ".permission", title: "Remove permission", type: "button"}
          = render partial: 'shared/icon' , locals: { class_string: 'icon-remove', alt_text: "Remove Field" }

.permission
  = f.label :identity, "Select Group"
  - options = {"" => ""}
  = select_tag "#{array_type}[permissions][identity][]", options_for_select(current_user.pretty_groups), class: "span12", prompt: "-- Select Group --"
  = label_tag "#{array_type}[permissions][permission_type][]", "Should this identity be allowed to read or edit?"
  %div{:style => "display: block;"}
    = select_tag "#{array_type}[permissions][permission_type][]", options_for_select(['read', 'edit']), class: "span12"
