- nu_core_file = @nu_core_file unless nu_core_file

- if !request.referer == "/collections"
  %ol.breadcrumb
    - include_file = true if include_file.blank?
    - herpderp = []
    - crumbs = []
    - crumbs << link_to('Home', root_path)
    - case request.referer
      - when /files/
        - crumbs << link_to('Back to previous', request.referer)
      - when /catalog/
        - crumbs << link_to('Back to search results', request.referer)

    - crumbs << nu_core_file.title if include_file
    - crumbs.each do |crumb|
      - if crumb == crumbs.last
        %li.active
          = crumb
      - else
        %li
          = crumb
- else
  %ul.breadcrumb
    - breadcrumb_to_root(SolrDocument.new(ActiveFedora::SolrService.query("id:\"#{@nu_core_file.pid}\"").first)).each do |breadcrumb|
      =breadcrumb
