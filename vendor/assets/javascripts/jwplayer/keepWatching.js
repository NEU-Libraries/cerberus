!function(){"use strict";!function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("media","screen"),e.innerHTML=t,document.head.appendChild(e)}}(".jw-kw-hidden{visibility:hidden}.keep-watching-button{color:#fff;margin:5px;font-family:Arial,sans-serif;font-size:14px;font-weight:700;text-decoration:none;border-bottom:1px solid rgba(255,255,255,0)}.button-container{cursor:pointer;background-color:#055ffc;float:right;transition:opacity .3s ease;position:absolute;bottom:0;right:0;margin-right:17px;margin-bottom:15px;border-width:12px 20px;border-style:solid;border-color:#055ffc;border-radius:5px;opacity:1}.button-container:hover{opacity:.3}.progress-bar{position:absolute;bottom:0;left:0;width:0%;height:3px;background-color:#fff}.play-pause-button,.skip-button{margin-bottom:7px;margin-right:5px;border:0 solid transparent;background-color:transparent;color:#fff;position:absolute;bottom:0}.progress-bar .jw-kw-hidden{width:0;visibility:hidden;animation:none;animation-play-state:paused}@keyframes progressAnimation{to{width:100%}}.skip-button{margin-left:30px}.next-video{color:#fff;position:absolute;bottom:0;margin-bottom:10px;font-family:Roboto,sans-serif;font-size:11px;margin-left:69px}.jw-overlays .keepWatching-container.jw-plugin.jw-reset{pointer-events:none;cursor:default;position:absolute;width:100%;height:100%;bottom:0;padding-left:12px;padding-right:12px}.jw-overlays .keepWatching-container.jw-plugin.jw-reset.jw-kw-active{background:linear-gradient(to top,#000,transparent);cursor:pointer;pointer-events:auto}");const t={countdownStartTime:20,countdownDuration:10};(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)("keepWatching","0.0.0",class{constructor(e,i,s){this.handleClick=()=>{"paused"===this.player.getState()||"idle"===this.player.getState()?this.player.play():this.player.pause(),this._handlePlayerInteraction()},this.handleDblClick=()=>{this.player.setFullscreen(),this._handlePlayerInteraction()},this.player=e,this.config=Object.assign({},t,i),this.div=s,this.enabled=!0,this.hideKeepWatchingButton=!1,this.controlBarHidden=!1,this.keepWatchingStartTime=this.config.countdownStartTime,this.keepWatchingActive=!1,this.createButtonElements(),this.setupStyles(),this.setupEventListeners(),this.setupPlayerBaseEvents(),this.addToDiv()}enable(){this.enabled||(this.enabled=!0,this._playlistItemHandler(),this.setupPlayerBaseEvents(),this.setupPlayerEvents())}disable(){this.player.off("playlistItem",this.enable,this),this.enabled&&(this.enabled=!1,this._disablePlayerBaseEvents(),this._disablePlayerPlaybackEvents(),this._disableKeepWatchingModal(),this.resetCustomElements())}disableForCurrentItem(){this.disable(),this.player.once("playlistItem",this.enable,this)}createButtonElements(){this.buttonEl=document.createElement("span"),this.buttonTextEl=document.createElement("span"),this.nextVideoTextEl=document.createElement("span"),this.progressBar=document.createElement("span"),this.playPauseButtonEl=document.createElement("button"),this.skipButtonEl=document.createElement("button"),this.uiElements=[this.playPauseButtonEl,this.skipButtonEl,this.buttonEl,this.nextVideoTextEl,this.progressBar]}setupStyles(){this.setupButtonStyles(),this.setupProgressBarStyles(),this.setupPlayPauseButtonStyles(),this.setupSkipButtonStyles(),this.setupNextVideoTextStyles(),this.setupDivStyles()}setupButtonStyles(){this.buttonTextEl.className="keep-watching-button",this.buttonTextEl.innerText="Keep Watching",this.buttonEl.appendChild(this.buttonTextEl),this.buttonEl.className="button-container"}setupProgressBarStyles(){this.progressBar.className="progress-bar",this.progressBar.style.animation=`progressAnimation ${this.config.countdownDuration}s linear forwards paused`,this.progressBar.classList.remove("jw-kw-hidden")}setIconAttributes(t,e){t.setAttribute("width","16"),t.setAttribute("height","16"),t.setAttribute("fill","white"),t.setAttribute("stroke","transparent"),t.innerHTML=e}setupPlayPauseButtonStyles(){this.playPauseButtonEl.className="play-pause-button",this.playIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setIconAttributes(this.playIcon,'<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-play" viewBox="0 0 240 240" focusable="false"><path d="M62.8,199.5c-1,0.8-2.4,0.6-3.3-0.4c-0.4-0.5-0.6-1.1-0.5-1.8V42.6c-0.2-1.3,0.7-2.4,1.9-2.6c0.7-0.1,1.3,0.1,1.9,0.4l154.7,77.7c2.1,1.1,2.1,2.8,0,3.8L62.8,199.5z"/></svg>'),this.pauseIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setIconAttributes(this.pauseIcon,'<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-pause" viewBox="0 0 240 240" focusable="false"><path d="M100,194.9c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0H65c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V45c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h30c2.6-0.2,4.8,1.8,5,4.4c0,0.2,0,0.4,0,0.6V194.9z M180,45.1c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6V195c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V45.1z"/></svg>'),this.playPauseButtonEl.appendChild(this.pauseIcon)}setupSkipButtonStyles(){this.skipButtonEl.className="skip-button",this.skipIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setIconAttributes(this.skipIcon,'<svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-next" viewBox="0 0 240 240" focusable="false"><path d="M165,60v53.3L59.2,42.8C56.9,41.3,55,42.3,55,45v150c0,2.7,1.9,3.8,4.2,2.2L165,126.6v53.3h20v-120L165,60L165,60z"/></svg>'),this.skipButtonEl.appendChild(this.skipIcon)}setupNextVideoTextStyles(){this.nextVideoTextEl.className="next-video",this.nextVideoTextEl.innerText=`Next video in ${this.config.countdownDuration} second${1===this.config.countdownDuration?"":"s"}`}setupDivStyles(){this.div.classList.add("keepWatching-container")}resetCustomElements(){this.hideVisibleElements(),this.deleteControlBarHideRule()}hideVisibleElements(){this.uiElements.forEach((t=>{t.classList.add("jw-kw-hidden")})),this.div.classList.remove("jw-kw-active")}setupEventListeners(){this.playPauseButtonEl.addEventListener("click",(()=>{"paused"===this.player.getState()||"idle"===this.player.getState()?this.player.play():this.player.pause()})),this.buttonEl.addEventListener("click",(()=>{this.hideKeepWatchingButton=!0,this.keepWatchingActive=!1,this._disablePlayerPlaybackEvents(),this._disablePlayerControlEvents(),this.resetCustomElements()})),this.skipButtonEl.addEventListener("click",(()=>{this.nextVideo()})),this.buttonEl.addEventListener("mouseenter",(()=>{this.buttonEl.style.opacity="0.3"})),this.buttonEl.addEventListener("mouseleave",(()=>{this.buttonEl.style.opacity="1"}))}nextVideo(){var t;this.resetCustomElements(),(this.player.getPlaylist().length>1||null!=(t=this.player.getConfig("related"))&&t.nextUp)&&this.player.next()}setupPlayerBaseEvents(){this.player.on("playlistItem",this._playlistItemHandler,this),this.player.on("firstFrame",this._firstFrameHandler,this)}_disablePlayerBaseEvents(){this.player.off("playlistItem",this._playlistItemHandler,this),this.player.off("firstFrame",this._firstFrameHandler,this)}setupPlayerEvents(){this.player.on("play",this._playHandler,this),this.player.on("pause",this._pauseHandler,this),this.player.on("time",this._timeHandler,this),this.player.on("levelsChanged mute volume displayClick fullscreen captionsChanged seek",this._handlePlayerInteraction,this),this.player.on("resize",this._resizeHandler,this)}_disablePlayerPlaybackEvents(){this.player.off("time",this._timeHandler,this),this.player.off("play",this._playHandler,this),this.player.off("pause",this._pauseHandler,this)}_disablePlayerControlEvents(){this.player.off("levelsChanged mute volume displayClick fullscreen captionsChanged seek",this._handlePlayerInteraction,this),this.player.off("resize",this._resizeHandler,this)}_playHandler(){this.playPauseButtonEl.innerHTML="",this.playPauseButtonEl.appendChild(this.pauseIcon),this.progressBar.style.animationPlayState="running"}_pauseHandler(){this.playPauseButtonEl.innerHTML="",this.playPauseButtonEl.appendChild(this.playIcon),this.progressBar.style.animationPlayState="paused",this._handlePlayerInteraction()}_disableKeepWatchingModal(){this.hideKeepWatchingButton=!0,this._disablePlayerControlEvents()}_handlePlayerInteraction(){this.hideKeepWatchingButton||this._disableKeepWatchingModal()}_playlistItemHandler(){this.resetCustomElements(),this.hideKeepWatchingButton=!1,this.keepWatchingActive=!1,this.keepWatchingStartTime=this.config.countdownStartTime}_firstFrameHandler(){var t,e;const i=this.player.getPlaylistIndex()<this.player.getPlaylist().length-1,s=Boolean(null==(t=this.player.getConfig())||null==(e=t.recItems)?void 0:e.length);i||s?this.setupPlayerEvents():(this._disablePlayerPlaybackEvents(),this._disableKeepWatchingModal())}_timeHandler(t){const e=this.keepWatchingStartTime,i=e+this.config.countdownDuration,{position:s}=t,n=s>=i;if(s>=e&&s<i){const t=Math.min(this.player.getDuration()-s,i-s),n=Math.ceil(t);if("paused"===this.progressBar.style.animationPlayState&&(this.progressBar.style.animationDuration=`${Math.min(this.config.countdownDuration,this.player.getDuration()-e)}s`,this.progressBar.style.animationPlayState="running"),this.nextVideoTextEl.innerText=`Next video in ${n} second${1===n?"":"s"}`,!this.keepWatchingActive){if(this.hideKeepWatchingButton)return;this.keepWatchingActive=!0,this.addControlBarHideRule(),this.progressBar.style.animation=`progressAnimation ${Math.min(this.config.countdownDuration,this.player.getDuration()-e)}s linear forwards paused`,this.div.classList.add("jw-kw-active"),this.uiElements.forEach((t=>{t.classList.remove("jw-kw-hidden")}))}}else!n||this.hideKeepWatchingButton&&!this.keepWatchingActive||this.nextVideo()}_resizeHandler(t){const{width:e}=t;this.buttonTextEl.style.fontSize="",["Top","Right","Bottom","Left"].forEach((t=>{this.buttonEl.style[`border${t}Width`]=""}));const i=document.querySelector(".keep-watching-button"),s=document.querySelector(".button-container");if(!i||!s)return;const n=parseInt(window.getComputedStyle(i).getPropertyValue("font-size"),10),a=["top","right","bottom","left"].reduce(((t,e)=>(t[e]=parseInt(window.getComputedStyle(s).getPropertyValue(`border-${e}-width`),10),t)),{});e<539?(this.buttonTextEl.style.fontSize=n*e/639+"px",["Top","Right","Bottom","Left"].forEach((t=>{this.buttonEl.style[`border${t}Width`]="0px"}))):(this.buttonTextEl.style.fontSize=n*e/639+"px",["Top","Right","Bottom","Left"].forEach((t=>{this.buttonEl.style[`border${t}Width`]=a[t.toLowerCase()]*e/639+"px"}))),this._handlePlayerInteraction()}addToDiv(){this.div.appendChild(this.buttonEl),this.div.appendChild(this.progressBar),this.div.appendChild(this.playPauseButtonEl),this.div.appendChild(this.skipButtonEl),this.div.appendChild(this.nextVideoTextEl)}addControlBarHideRule(){this.controlBarHidden||(this.player.setControls(!1),this.div&&(this.div.addEventListener("click",this.handleClick),this.div.addEventListener("dblclick",this.handleDblClick)),this.controlBarHidden=!0)}deleteControlBarHideRule(){this.controlBarHidden&&(this.player.setControls(!0),this.div&&(this.div.removeEventListener("click",this.handleClick),this.div.removeEventListener("dblclick",this.handleDblClick)),this.controlBarHidden=!1)}destroy(){var t;null!=(t=this.div)&&t.parentNode&&this.div.parentNode.removeChild(this.div),this.player.off(null,null,this)}})}();
